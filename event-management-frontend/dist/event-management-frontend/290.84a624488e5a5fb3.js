"use strict";(self.webpackChunkevent_management_frontend=self.webpackChunkevent_management_frontend||[]).push([[290],{6290:(v,f,i)=>{i.r(f),i.d(f,{LoginComponent:()=>F});var _=i(177),r=i(9417),g=i(7062),l=i(5596),m=i(882),h=i(9631),u=i(8834),p=i(9213),E=i(5416),n=i(7705),P=i(4312);function C(e,c){1&e&&(n.j41(0,"mat-error"),n.EFF(1," Username is required "),n.k0s())}function M(e,c){1&e&&(n.j41(0,"mat-error"),n.EFF(1," Password is required "),n.k0s())}function L(e,c){1&e&&(n.j41(0,"mat-icon"),n.EFF(1,"hourglass_empty"),n.k0s())}function O(e,c){1&e&&(n.j41(0,"mat-icon"),n.EFF(1,"login"),n.k0s())}let F=(()=>{class e{constructor(o,a,t,s,d){this.fb=o,this.authService=a,this.router=t,this.route=s,this.snackBar=d,this.hidePassword=!0,this.isLoading=!1,this.isAdminLogin=!1,this.returnUrl=null,this.loginForm=this.fb.group({username:["",r.k0.required],password:["",r.k0.required]})}ngOnInit(){this.route.queryParams.subscribe(o=>{this.isAdminLogin="/admin"===o.returnUrl,this.returnUrl=o.returnUrl||"/events"})}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0;const{username:o,password:a}=this.loginForm.value;this.authService.login({username:o,password:a},this.isAdminLogin).subscribe({next:t=>{this.isAdminLogin?this.router.navigate(["/admin"]):this.router.navigateByUrl(this.returnUrl||"/events"),this.isLoading=!1},error:t=>{this.snackBar.open(t.error?.message||"Login failed. Please check your credentials.","Close",{duration:5e3}),this.isLoading=!1}})}static{this.\u0275fac=function(a){return new(a||e)(n.rXU(r.ok),n.rXU(P.u),n.rXU(g.Ix),n.rXU(g.nX),n.rXU(E.UG))}}static{this.\u0275cmp=n.VBU({type:e,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:33,vars:12,consts:[[1,"login-container"],[3,"ngClass"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","type","text","required",""],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","required","",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"register-link"],["routerLink","/register"]],template:function(a,t){if(1&a&&(n.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),n.EFF(5),n.k0s(),n.EFF(6),n.k0s()(),n.j41(7,"mat-card-content")(8,"form",2),n.bIt("ngSubmit",function(){return t.onSubmit()}),n.j41(9,"mat-form-field",3)(10,"mat-label"),n.EFF(11,"Username"),n.k0s(),n.nrm(12,"input",4),n.j41(13,"mat-icon",5),n.EFF(14,"person"),n.k0s(),n.DNE(15,C,2,0,"mat-error",6),n.k0s(),n.j41(16,"mat-form-field",3)(17,"mat-label"),n.EFF(18,"Password"),n.k0s(),n.nrm(19,"input",7),n.j41(20,"button",8),n.bIt("click",function(){return t.hidePassword=!t.hidePassword}),n.j41(21,"mat-icon"),n.EFF(22),n.k0s()(),n.DNE(23,M,2,0,"mat-error",6),n.k0s(),n.j41(24,"button",9),n.DNE(25,L,2,0,"mat-icon",6),n.DNE(26,O,2,0,"mat-icon",6),n.EFF(27),n.k0s()()(),n.j41(28,"mat-card-actions")(29,"p",10),n.EFF(30," Don't have an account? "),n.j41(31,"a",11),n.EFF(32,"Sign up here"),n.k0s()()()()()),2&a){let s,d;n.R7$(1),n.Y8G("ngClass",t.isAdminLogin?"admin-login-card":"login-card"),n.R7$(4),n.JRh(t.isAdminLogin?"admin_panel_settings":"login"),n.R7$(1),n.SpI(" ",t.isAdminLogin?"Admin Login":"Login to EventHub"," "),n.R7$(2),n.Y8G("formGroup",t.loginForm),n.R7$(7),n.Y8G("ngIf",null==(s=t.loginForm.get("username"))?null:s.hasError("required")),n.R7$(4),n.Y8G("type",t.hidePassword?"password":"text"),n.R7$(3),n.JRh(t.hidePassword?"visibility_off":"visibility"),n.R7$(1),n.Y8G("ngIf",null==(d=t.loginForm.get("password"))?null:d.hasError("required")),n.R7$(1),n.Y8G("disabled",t.loginForm.invalid||t.isLoading),n.R7$(1),n.Y8G("ngIf",t.isLoading),n.R7$(1),n.Y8G("ngIf",!t.isLoading),n.R7$(1),n.SpI(" ",t.isLoading?"Signing In...":"Sign In"," ")}},dependencies:[_.MD,_.YU,_.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.j4,r.JD,g.iI,g.Wk,l.Hu,l.RN,l.YY,l.m2,l.MM,l.dh,m.RG,m.rl,m.nJ,m.TL,m.yw,h.fS,h.fg,u.Hl,u.$z,u.iY,p.m_,p.An,E._T],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.login-card[_ngcontent-%COMP%], .admin-login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:20px}.admin-login-card[_ngcontent-%COMP%]{border:2px solid #673ab7}.admin-login-card[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]{color:#673ab7}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.login-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-size:1.5rem;color:#1976d2}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.register-link[_ngcontent-%COMP%]{text-align:center;margin:16px 0}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[mat-raised-button][_ngcontent-%COMP%]{height:48px;font-size:1rem}"]})}}return e})()}}]);